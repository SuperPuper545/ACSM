{% load static %}
<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible"
          content="IE=edge">
    <meta name="viewport"
          content="width=device-width,
                   initial-scale=1.0">
    <title>{% block title %}{% endblock %}</title>
    <link rel="stylesheet"
          href="{% static 'css/style.css'%}">
    <link rel="stylesheet"
          href="{% static 'css/responsive.css'%}">
</head>

<body class="light-theme">

    <!-- for header part -->
    <header>
        <div class="logosec">
            <div class="logo">Мелдана</div>
            <img src="{% static 'img/menu.png' %}"
                class="icn menuicn"
                id="menuicn"
                alt="menu-icon">
        </div>
        {% block search %}
        {% endblock %}
        <a href="{% url 'main:user_info' %}">
            <div class="message">
                <div class="dp">
                    {% if user.is_authenticated %}
                         <img src= "{{ user.image.url }}"
                              class="dpicn"
                              alt="dp">
                    {% endif %}
                  </div>
                {% if user.is_authenticated %}
                    <h3 class="re">{{ user.fio }}</h3>
                {% endif %}
            </div>
        </a>
    </header>

    <div class="main-container">
        <div class="navcontainer">
            <nav class="nav">
                <div class="nav-upper-options">

                    <a href="{% url 'main:acms_personal' %}">
                    <div class={% block nav1%}{% endblock %}>
                        <svg width="30px" height="30px" viewBox="5 0 60 60" id="Layer_1" data-name="Layer 1" xmlns="http://www.w3.org/2000/svg"><path class="cls-1" d="M12.54,52.05H59.46a2.11,2.11,0,0,0,1.6-.7A1.73,1.73,0,0,0,61.49,50,25.8,25.8,0,0,0,47.9,30.45a16.8,16.8,0,0,1-23.8,0A25.8,25.8,0,0,0,10.51,50a1.75,1.75,0,0,0,.43,1.38A2.11,2.11,0,0,0,12.54,52.05Z"/><path class="cls-1" d="M25.43,28.6c.27.29.56.56.85.82a14.52,14.52,0,0,0,19.43,0,11.1,11.1,0,0,0,.86-.82c.27-.29.54-.58.79-.89a14.6,14.6,0,1,0-22.72,0C24.89,28,25.16,28.31,25.43,28.6Z"/></svg>
                        <h3> Персонал</h3>
                    </div>
                    </a>

                    <a href="{% url 'main:acms_clock' %}">
                    <div class={% block nav2%}{% endblock %} id="clock">
                        <svg height="30px" width="30px" version="1.1" id="Icons" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink"
                        viewBox="2 0 30 30" xml:space="preserve">
                   <path d="M16,2C8.3,2,2,8.3,2,16s6.3,14,14,14s14-6.3,14-14S23.7,2,16,2z M23,17h-7c-0.6,0-1-0.4-1-1V7c0-0.6,0.4-1,1-1s1,0.4,1,1v8
                       h6c0.6,0,1,0.4,1,1S23.6,17,23,17z"/>
                   </svg>
                        <h3>Учёт времени</h3>
                    </div>
                    </a>

                    <!-- <a href="{% url 'main:acms_monitoring' %}">
                    <div class={% block nav3%}{% endblock %}>
                        <svg width="30px" height="30px" viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg" preserveAspectRatio="xMinYMin" class="jam jam-screen-f"><path d='M3 .565h14a3 3 0 0 1 3 3v9a3 3 0 0 1-3 3H3a3 3 0 0 1-3-3v-9a3 3 0 0 1 3-3zm4 16h6a1 1 0 0 1 0 2H7a1 1 0 0 1 0-2z' /></svg>
                        <h3>Мониторинг</h3>
                    </div>
                    </a> -->

                    <a href="{% url 'main:acms_settings' %}">
                    <div class={% block nav4%}{% endblock %}>
                        <svg width="30px" height="30px" viewBox="2 0 30 30" enable-background="new 0 0 32 32" id="Glyph" version="1.1" xml:space="preserve" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink"><path d="M27.526,18.036L27,17.732c-0.626-0.361-1-1.009-1-1.732s0.374-1.371,1-1.732l0.526-0.304  c1.436-0.83,1.927-2.662,1.098-4.098l-1-1.732c-0.827-1.433-2.666-1.925-4.098-1.098L23,7.339c-0.626,0.362-1.375,0.362-2,0  c-0.626-0.362-1-1.009-1-1.732V5c0-1.654-1.346-3-3-3h-2c-1.654,0-3,1.346-3,3v0.608c0,0.723-0.374,1.37-1,1.732  c-0.626,0.361-1.374,0.362-2,0L8.474,7.036C7.042,6.209,5.203,6.701,4.375,8.134l-1,1.732c-0.829,1.436-0.338,3.269,1.098,4.098  L5,14.268C5.626,14.629,6,15.277,6,16s-0.374,1.371-1,1.732l-0.526,0.304c-1.436,0.829-1.927,2.662-1.098,4.098l1,1.732  c0.828,1.433,2.667,1.925,4.098,1.098L9,24.661c0.626-0.363,1.374-0.361,2,0c0.626,0.362,1,1.009,1,1.732V27c0,1.654,1.346,3,3,3h2  c1.654,0,3-1.346,3-3v-0.608c0-0.723,0.374-1.37,1-1.732c0.625-0.361,1.374-0.362,2,0l0.526,0.304  c1.432,0.826,3.271,0.334,4.098-1.098l1-1.732C29.453,20.698,28.962,18.865,27.526,18.036z M16,21c-2.757,0-5-2.243-5-5s2.243-5,5-5  s5,2.243,5,5S18.757,21,16,21z" id="XMLID_273_"/></svg>
                        <h3>Система</h3>
                    </div>
                    </a>
                <style>
                    .nav-option1 {
                        width: 250px;
                        height: 60px;
                        display: flex;
                        align-items: center;
                        padding: 0 30px 0 20px;
                        gap: 20px;
                        transition: all 0.1s ease-in-out;
                        background-color: var(--background-color2);
                        border: none;
                    }
                    .nav-option1:hover {
                        border-left: 5px solid var(--navhover-color1);
                        background-color: var(--navhover-color2);
                        cursor: pointer;
                    }
                    .re{
                        font-family: "Poppins", sans-serif;
                        font-size: 18px;
                        color: var(--a-color);
                    }
                </style>
                        <form action="{% url 'main:logout' %}" method="post">
                            {% csrf_token %}
                            <button id='tre' class='nav-option1' type="submit"><svg width="30px" height="30px" viewBox="-50 0 512 512" xmlns="http://www.w3.org/2000/svg"><path d="M336,376V272H191a16,16,0,0,1,0-32H336V136a56.06,56.06,0,0,0-56-56H88a56.06,56.06,0,0,0-56,56V376a56.06,56.06,0,0,0,56,56H280A56.06,56.06,0,0,0,336,376Z"/><path d="M425.37,272l-52.68,52.69a16,16,0,0,0,22.62,22.62l80-80a16,16,0,0,0,0-22.62l-80-80a16,16,0,0,0-22.62,22.62L425.37,240H336v32Z"/></svg><h3 class="re">Выйти</h3></button>
                        </form>


                </div>

                <div class="nav-option" id="themeToggle">
                    <svg width="30px" height="30px" viewBox="0 0 32 32" version="1.1" xmlns="http://www.w3.org/2000/svg">
                        <path d="M0 16q0.064 0.128 0.16 0.352t0.48 0.928 0.832 1.344 1.248 1.536 1.664 1.696 2.144 1.568 2.624 1.344 3.136 0.896 3.712 0.352 3.712-0.352 3.168-0.928 2.592-1.312 2.144-1.6 1.664-1.632 1.248-1.6 0.832-1.312 0.48-0.928l0.16-0.352q-0.032-0.128-0.16-0.352t-0.48-0.896-0.832-1.344-1.248-1.568-1.664-1.664-2.144-1.568-2.624-1.344-3.136-0.896-3.712-0.352-3.712 0.352-3.168 0.896-2.592 1.344-2.144 1.568-1.664 1.664-1.248 1.568-0.832 1.344-0.48 0.928zM10.016 16q0-2.464 1.728-4.224t4.256-1.76 4.256 1.76 1.76 4.224-1.76 4.256-4.256 1.76-4.256-1.76-1.728-4.256zM12 16q0 1.664 1.184 2.848t2.816 1.152 2.816-1.152 1.184-2.848-1.184-2.816-2.816-1.184-2.816 1.184l2.816 2.816h-4z"></path>
                        </svg>
                    <h3>Тема</h3>
                </div>

            </nav>
        </div>
        {% block main %}
        {% endblock %}
    </div>

    <dialog class="dialog" id="some-modal-id" aria-labelledby="dialog-name">
        <h2 class="dialog__title" id="dialog-name">Добавить сотрудника</h2>
        <input type="email">
        <form method="dialog">
          <button class="dialog__button button-orange">
            Сохранить
          </button>
        </form>
      </dialog>
        <script>
// Найти поля ввода поиска
var searchInputs = document.querySelectorAll('.searchbar2 input[type="text"]');

// Найти все таблицы с данными
var tables = document.querySelectorAll('.content table');

// Функция для фильтрации таблицы
function filterTable(sectionIndex, query) {
    var table = tables[sectionIndex];
    var rows = table.getElementsByTagName('tr');

    // Пройти по каждой строке таблицы
    for (var i = 0; i < rows.length; i++) {
        var currentRow = rows[i];
        var cells = currentRow.getElementsByTagName('td');
        var found = false;

        // Пройти по каждой ячейке строки
        for (var j = 0; j < cells.length; j++) {
            var currentCell = cells[j];
            if (currentCell.textContent.toLowerCase().indexOf(query.toLowerCase()) > -1) {
                found = true;
                break;
            }
        }

        // Показать или скрыть строку в зависимости от результата поиска
        if (found) {
            currentRow.style.display = '';
        } else {
            currentRow.style.display = 'none';
        }
    }
}

// Обработчик события ввода текста в поле поиска
searchInputs.forEach(function(input) {
    input.addEventListener('input', function() {
        var selectedTab = document.querySelector('input[name="tab-control"]:checked');
        var sectionIndex = parseInt(selectedTab.id.slice(-1)) - 1; // Получить индекс текущей секции
        var query = this.value.trim(); // Получить введенный пользователем запрос

        // Фильтровать таблицу текущей секции
        filterTable(sectionIndex, query);
    });
});        </script>
    <script src="{% static 'js/index.js' %}"></script>
<script>
    document.addEventListener("DOMContentLoaded", function () {
        // Функция для выполнения поиска
        function performSearch(searchText, selectedSection) {
            // Получаем таблицу внутри выбранной секции
            var table = document.getElementById(selectedSection).querySelector("table");

            // Получаем все строки таблицы, начиная с заголовка
            var rows = table.querySelectorAll("tr");

            // Перебираем все строки таблицы, начиная со второй строки (первая строка - заголовок)
            for (var i = 1; i < rows.length; i++) {
                var row = rows[i];

                // Получаем ячейки текущей строки
                var cells = row.querySelectorAll("td");

                // Переменная для хранения информации о том, соответствует ли строка поисковому запросу
                var match = false;

                // Перебираем ячейки текущей строки
                cells.forEach(function (cell) {
                    // Проверяем, содержит ли содержимое ячейки текст поискового запроса
                    if (searchText === "" || cell.textContent.toLowerCase().includes(searchText)) {
                        // Если текст найден или поисковый запрос пуст, устанавливаем переменную match в true
                        match = true;
                    }
                });

                // Отображаем или скрываем строку в зависимости от результата поиска
                if (match) {
                    row.style.display = "";
                } else {
                    row.style.display = "none";
                }
            }
        }

        // Обработчик события для поля ввода в searchbar
        document.querySelector(".searchbar input").addEventListener("input", function () {
            // Получаем значение поля поиска
            var searchText = this.value.toLowerCase();

            // Определяем текущую выбранную секцию
            var selectedSection = document.querySelector('input[name="tab-control"]:checked').id + "-content";

            // Вызываем функцию выполнения поиска
            performSearch(searchText, selectedSection);
        });

        // Обработчик события для кнопки поиска в searchbar
        document.querySelector(".searchbtn").addEventListener("click", function () {
            // Получаем значение поля поиска
            var searchText = document.querySelector(".searchbar input").value.toLowerCase();

            // Определяем текущую выбранную секцию
            var selectedSection = document.querySelector('input[name="tab-control"]:checked').id + "-content";

            // Вызываем функцию выполнения поиска
            performSearch(searchText, selectedSection);
        });
    });
</script>
</body>
</html>