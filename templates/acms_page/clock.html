{% extends "acms_page/base.html" %}
{% load static %}

{% block nav1 %}"nav-option option2"{% endblock %}
{% block nav2 %}"nav-option option1"{% endblock %}
{% block nav3 %}"nav-option option3"{% endblock %}
{% block nav4 %}"nav-option option4"{% endblock %}
{% block search %}
    <div class="searchbar">
        <input type="text"
               placeholder="Поиск">
        <div class="searchbtn">
            <img src= "{% static 'img/search.png' %}"
                 class="icn srchicn"
                 alt="search-icon">
        </div>
    </div>
{% endblock %}
{% block main %}
        <div class="main"> 
  
            <div class="searchbar2"> 
                <input type="text" 
                       name="" 
                       id="" 
                       placeholder="Поиск">
                <div class="searchbtn"> 
                  <img src= "{% static 'img/search.png' %}"
                        class="icn srchicn" 
                        alt="search-button"> 
                  </div> 
            </div> 
  
            <div class="box-container"> 
                
                <label for="tab1" role="button">
                    <div class="box box1"> 
                        <img src="{% static 'img/time/visit.png' %}" alt="Views">
                        <div class="text"> 
                            <h2 class="topic">Посещение</h2> 
                        </div> 
                    </div> 
                </label>
  
                <label for="tab2" role="button">
                    <div class="box box2"> 
                        <img src="{% static 'img/personal/work_gr.png' %}" alt="likes">
                        <div class="text"> 
                            <h2 class="topic">График работы</h2>
                        </div> 
                    </div> 
                </label>

                <label for="tab3" role="button">
                    <div class="box box3"> 
                        <img src="{% static 'img/time/doc_per.png' %}" alt="comments">
                        <div class="text"> 
                            <h2 class="topic">Объяснительные</h2> 
                        </div> 
                    </div>
                </label> 

                <label for="tab4" role="button">
                    <div class="box box3"> 
                        <img src="{% static 'img/time/calendar.png' %}" alt="comments">
                        <div class="text"> 
                            <h2 class="topic">Календарь</h2>
                        </div> 
                    </div>
                </label> 

            </div> 

            <input type="radio" id="tab1" name="tab-control" checked>
            <input type="radio" id="tab2" name="tab-control">
            <input type="radio" id="tab3" name="tab-control">
            <input type="radio" id="tab4" name="tab-control">
            
            <div class="content">

                <section id="tab1-content">
                    <div class="report-container"> 
                        <div class="report-header"> 
                            <h1 class="recent-Articles">Посещение</h1> 
                            <div class="button-grid">
                                <a href="{% url 'main:add_visitor' %}"><button class="view">+ Добавить</button></a>
                            </div>
                        </div> 
                        
                        <div class="report-body"> 
                            <table>
                                <thead>
                                    <tr>
                                        <th>Посетитель</th>
                                        <th>Сопровождающий</th>
                                        <th>Куда (подразделение)</th>
                                        <th>Дата</th>
                                    </tr>
                                </thead>
                                <tbody>
                                    {% for visit in visitor %}
                                        <tr onclick="window.location.href='{% url 'main:visitor_detail' visit.visitor_slug %}'" style="cursor:pointer;">
                                            <td>{{ visit.visitor }}</td>
                                            <td>{{ visit.maintainer }}</td>
                                            <td>{{ visit.division }}</td>
                                            <td>{{ visit.start_date }} - {{ visit.end_date }}</td>
                                            <td>
                                                <form action="{% url 'main:delete_visitor' visit.id %}" method="post">
                                                    {% csrf_token %}
                                                    <button class="view" type="submit" onclick="return confirm('Вы уверены, что хотите удалить посетителя?')">Удалить</button>
                                                </form>
                                            </td>
                                        </tr>
                                    {% endfor %}
                                </tbody>
                            </table> 
                        </div>
                    </div> 
                </section>
                
                <section id="tab2-content">
                    <div class="report-container">
                        <div class="report-header">
                            <h1 class="recent-Articles">График работы</h1>
                            <a href="{% url 'main:add_work_schedule' %}"><button class="view">+ Добавить</button></a>
                        </div>

                        <div class="report-body">
                            <table>
                                <thead>
                                    <tr>
                                        <th>Название</th>
                                        <th>Тип графика</th>
                                        <th>Описание</th>
                                        <th>Статус</th>
                                    </tr>
                                </thead>
                                <tbody>
                                {% for time in workschedule %}
                                    <tr onclick="window.location.href='{% url 'main:work_schedule_detail' time.time_slug %}'" style="cursor:pointer;">
                                        <td>{{ time.time_name }}</td>
                                        <td>{{ time.start_time }} - {{ time.end_time }}</td>
                                        <td>{{ time.time_description }}</td>
                                        <td>{{ time.time_status }}</td>
                                        <td>
                                            <form action="{% url 'main:delete_work_schedule' time.id %}" method="post">
                                                {% csrf_token %}
                                                <button class="view" type="submit" onclick="return confirm('Вы уверены, что хотите удалить это время?')">Удалить</button>
                                            </form>
                                        </td>
                                    </tr>
                                {% endfor %}
                                </tbody>
                            </table>
                        </div>
                    </div>
                </section>

                <section id="tab3-content">
                    <div class="report-container"> 
                        <div class="report-header"> 
                            <h1 class="recent-Articles">Объяснительные</h1> 
                            <div class="button-grid">
                                <a href="{% url 'main:add_explanatorynotes' %}"><button class="view">+ Добавить</button></a>
                            </div>
                        </div>
        
                        <div class="report-body"> 
                            <table>
                                <thead>
                                    <tr>
                                        <th>Сотрудник</th>
                                        <th>Название типа документа</th>
                                        <th>Добавление к рабочему времени</th>
                                        <th>Способ исчисления</th>
                                    </tr>
                                </thead>
                                <tbody>
                                {% for note in notes %}
                                        <tr onclick="window.location.href='{% url 'main:explanatorynotes_detail' note.explanatory_slug %}'" style="cursor:pointer;">
                                            <td>{{ note.employee }}</td>
                                            <td>{{ note.doc_type }}</td>
                                            <td>{{ note.add_work_hours }}</td>
                                            <td>{{ note.fine }}</td>
                                            <td>
                                                <form action="{% url 'main:delete_explanatorynotes' note.id %}" method="post">
                                                    {% csrf_token %}
                                                    <button class="view" type="submit" onclick="return confirm('Вы уверены, что хотите удалить объяснительную?')">Удалить</button>
                                                </form>
                                            </td>
                                        </tr>
                                {% endfor %}
                                </tbody>
                            </table> 
                        </div> 

                    </div> 
                </section>
                <style>
                    .calendar {
                        border-collapse: collapse;
                        margin-bottom: 20px;
                    }
                    .calendar th, .calendar td {
                        border: 2px solid #ccc;
                        padding: 10px;
                        text-align: center;
                        width: 40px;
                        cursor: pointer;
                    }
                    .calendar td:hover{
                        background: var(--navhover-color2);
                    }
                    .calendar tr:hover, .calendar th:hover {
                        background: #ededed;
                    }
                    .weekend {
                        color: red;
                    }
                    .selected {
                        background-color: rgba(172, 194, 191, 0.54);
                    }
                    .calendar tr{
                        background-color: #ededed;
                    }
                    #monthYear {
                        text-align: center;
                        margin-bottom: 10px;
                    }
                    .month{
                        display: flex;
                        align-items: baseline;
                    }
                    .text-month{
                        font-family: "Poppins", sans-serif;
                        font-size: 20px;
                        color: var(--reportartic-color);
                    }
                </style>

                <section id="tab4-content">
                    <div class="report-container">
                        <div class="report-header">
                            <h1 class="recent-Articles">Календарь</h1>
                            <div class="month">
                                <button class="view" onclick="prevMonth()">Прошлый</button>
                                <div class="text-month" id="monthYear"></div>
                                <button class="view" onclick="nextMonth()">Следующий</button>
                            </div>
                        </div>
                        <table class="calendar" id="calendar"></table>
                    </div>
                </section>

                <script src="{% static 'js/calendar.js' %}"></script>
            </div>
        </div>
    <script src="{% static 'js/table_save.js' %}"></script>
{% endblock %}