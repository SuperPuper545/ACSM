{% extends "acms_page/base.html" %}
{% load static %}

{% block title %}СКУД - система{% endblock %}

{% block nav1 %}"nav-option option1"{% endblock %}
{% block nav2 %}"nav-option option2"{% endblock %}
{% block nav3 %}"nav-option option3"{% endblock %}
{% block nav4 %}"nav-option option4"{% endblock %}
{% block search %}
    <div class="searchbar">
        <input type="text"
               placeholder="Поиск">
        <div class="searchbtn">
            <img src= "{% static 'img/search.png' %}"
                 class="icn srchicn"
                 alt="search-icon">
        </div>
    </div>
{% endblock %}
{% block main %}
    <div class="main">
            <div class="searchbar2">
                <input type="text"
                       name=""
                       id=""
                       placeholder="Поиск">
                <div class="searchbtn">
                  <img src= "{% static 'img/search.png' %}"
                        class="icn srchicn"
                        alt="search-button">
                  </div>
            </div>

            <div class="box-container">

                <label for="tab1" role="button">
                    <div class="box box1">
                        <img src=
                        "{% static 'img/personal/group.png' %}" alt="Views">
                        <div class="text">
                            <h2 class="topic">Сотрудники</h2>
                        </div>
                    </div>
                </label>

                <label for="tab2" role="button">
                    <div class="box box2">
                        <img src=
                        "{% static 'img/time/apass.png' %}" alt="likes">
                        <div class="text">
                            <h2 class="topic">Пропуска</h2>
                        </div>
                    </div>
                </label>

                <label for="tab3" role="button">
                    <div class="box box3">
                        <img src=
                        "{% static 'img/personal/tower.png' %}" alt="comments">
                        <div class="text">
                            <h2 class="topic">Подразделения</h2>
                        </div>
                    </div>
                </label>

                <label for="tab4" role="button">
                    <div class="box box4">
                        <img src=
                        "{% static 'img/personal/director.png' %}" alt="published">
                        <div class="text">
                            <h2 class="topic">Должности</h2>
                        </div>
                    </div>
                </label>
            </div>

                <input type="radio" id="tab1" name="tab-control" checked>
                <input type="radio" id="tab2" name="tab-control">
                <input type="radio" id="tab3" name="tab-control">
                <input type="radio" id="tab4" name="tab-control">

            <div class="content">

                <section id="tab1-content">
                    <div class="report-container">
                        <div class="report-header">
                            <h1 class="recent-Articles">Сотрудники</h1>
                            <a href="{% url 'main:add_staff' %}"><button class="view">+ Добавить</button></a>
                        </div>

                        <div class="report-body">
                            <table>
                                <thead>
                                    <tr>
                                        <th>ФИО</th>
                                        <th>Подразделение</th>
                                        <th>Должность</th>
                                        <th>График работы</th>
                                        <th>Шаблон доступа</th>
                                        <th>Фотография</th>
                                    </tr>
                                </thead>
                                <tbody>
                                    {% for employee in staff %}
                                        {% if employee.employee_slug %}
                                        <tr onclick="window.location.href='{% url 'main:staff_detail' employee.employee_slug %}'" style="cursor:pointer;">
                                        {% else %}
                                        {% endif %}
                                            <td>{{ employee.fio }}</td>
                                            <td>{{ employee.division }}</td>
                                            <td>{{ employee.post }}</td>
                                            <td>{{ employee.time }}</td>
                                            <td>{{ employee.pattern }}</td>
                                            <td><img src="{{ employee.image.url }}" style="width: 40px; height: 40px;"></td>
                                            <td>
                                                <form action="{% url 'main:delete_staff' employee.id %}" method="post">
                                                    {% csrf_token %}
                                                    <button class="view" type="submit" onclick="return confirm('Вы уверены, что хотите удалить этого сотрудника?')">Удалить</button>
                                                </form>
                                            </td>
                                        </tr>
                                    {% endfor %}
                                </tbody>
                            </table>
                        </div>
                    </div>
                </section>

                <section id="tab2-content">
                        <div class="report-container">
                            <div class="report-header">
                                <h1 class="recent-Articles">Пропуска</h1>
                                <div class="button-grid">
                                    <a href="{% url 'main:add_pattern' %}"><button class="view">+ Добавить</button></a>
                                </div>
                            </div>

                            <div class="report-body">
                                <table>
                                    <thead>
                                        <tr>
                                            <th>Шаблон доступа</th>
                                            <th>Описание</th>
                                        </tr>
                                    </thead>
                                    <tbody>
                                    {% for patt in pattern %}
                                        <tr onclick="window.location.href='{% url 'main:pattern_detail' patt.pattern_slug %}'" style="cursor:pointer;">
                                            <td>{{ patt.access_pattern }}</td>
                                            <td>{{ patt.access_description }}</td>
                                            <td>
                                                <form action="{% url 'main:delete_pattern' patt.id %}" method="post">
                                                    {% csrf_token %}
                                                    <button class="view" type="submit" onclick="return confirm('Вы уверены, что хотите удалить шаблон доступа?')">Удалить</button>
                                                </form>
                                            </td>
                                        </tr>
                                    {% endfor %}
                                    </tbody>
                                </table>
                            </div>

                        </div>
                    </section>

                <section id="tab3-content">
                    <div class="report-container">
                        <div class="report-header">
                            <h1 class="recent-Articles">Подразделения</h1>
                            <a href="{% url 'main:add_division' %}"><button class="view">+ Добавить</button></a>
                        </div>

                        <div class="report-body">
                            <table>
                                <thead>
                                    <tr>
                                        <th>Название</th>
                                        <th>Телефон</th>
                                        <th>Описание</th>
                                    </tr>
                                </thead>
                                <tbody>
                                {% for division_a in divisions %}
                                    <tr onclick="window.location.href='{% url 'main:division_detail' division_a.division_slug %}'" style="cursor:pointer;">
                                        <td>{{ division_a.division }}</td>
                                        <td>{{ division_a.division_number }}</td>
                                        <td>{{ division_a.division_description }}</td>
                                        <td>
                                            <form action="{% url 'main:delete_divisions' division_a.id %}" method="post">
                                                {% csrf_token %}
                                                <button class="view" type="submit" onclick="return confirm('Вы уверены, что хотите удалить это подразделение?')">Удалить</button>
                                            </form>
                                        </td>
                                    </tr>
                                {% endfor %}
                                </tbody>
                            </table>
                        </div>
                    </div>
                </section>

                <section id="tab4-content">
                    <div class="report-container">
                        <div class="report-header">
                            <h1 class="recent-Articles">Должности</h1>
                            <a href="{% url 'main:add_posts' %}"><button class="view">+ Добавить</button></a>
                        </div>

                        <div class="report-body">
                            <table>
                                <thead>
                                    <tr>
                                        <th>Название</th>
                                        <th>Описание</th>
                                    </tr>
                                </thead>
                                <tbody>
                                    {% for post_a in posts %}
                                        <tr onclick="window.location.href='{% url 'main:post_detail' post_a.post_slug %}'" style="cursor:pointer;">
                                            <td>{{ post_a.post }}</td>
                                            <td>{{ post_a.post_description }}</td>
                                            <td>
                                                <form action="{% url 'main:delete_posts' post_a.id %}" method="post">
                                                    {% csrf_token %}
                                                    <button class="view" type="submit" onclick="return confirm('Вы уверены, что хотите удалить эту должность?')">Удалить</button>
                                                </form>
                                            </td>
                                        </tr>
                                    {% endfor %}
                                </tbody>
                            </table>
                        </div>
                    </div>
                </section>
            </div>
        </div>
        <script src="{% static 'js/table_save.js' %}"></script>
{% endblock %}
