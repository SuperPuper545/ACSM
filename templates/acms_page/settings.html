{% extends "acms_page/base.html" %}
{% load static %}

{% block nav1 %}"nav-option option4"{% endblock %}
{% block nav2 %}"nav-option option2"{% endblock %}
{% block nav3 %}"nav-option option3"{% endblock %}
{% block nav4 %}"nav-option option1"{% endblock %}
{% block search %}
    <div class="searchbar">
        <input type="text"
               placeholder="Поиск">
        <div class="searchbtn">
            <img src= "{% static 'img/search.png' %}"
                 class="icn srchicn"
                 alt="search-icon">
        </div>
    </div>
{% endblock %}
{% block main %}
        <div class="main">

            <div class="searchbar2">
                <input type="text"
                       name=""
                       id=""
                       placeholder="Поиск">
                <div class="searchbtn">
                  <img src= "{% static 'img/search.png' %}"
                        class="icn srchicn"
                        alt="search-button">
                  </div>
            </div>

            <div class="box-container">

                <label for="tab1" role="button">
                    <div class="box box1">
                        <img src="{% static 'img/system/journal.png' %}" alt="Views">
                        <div class="text">
                            <h2 class="topic">Задания</h2>
                        </div>
                    </div>
                </label>

                <label for="tab2" role="button">
                    <div class="box box2">
                        <img src="{% static 'img/system/operator.png' %}" alt="likes">
                        <div class="text">
                            <h2 class="topic">Операторы</h2>
                        </div>
                    </div>
                </label>

                <label for="tab3" role="button">
                    <div class="box box3">
                        <img src="{% static 'img/system/doc.png' %}" alt="comments">
                        <div class="text">
                            <h2 class="topic">Документы</h2>
                        </div>
                    </div>
                </label>
            </div>

            <input type="radio" id="tab1" name="tab-control" checked>
            <input type="radio" id="tab2" name="tab-control">
            <input type="radio" id="tab3" name="tab-control">

            <div class="content">

                <section id="tab1-content">
                    <div class="report-container">
                        <div class="report-header">
                            <h1 class="recent-Articles">Задания</h1>
                            <div class="button-grid">
                                <a href="{% url 'main:add_task' %}"><button class="view">+ Добавить</button></a>
                            </div>
                        </div>

                        <div class="report-body">
                            <table>
                                <thead>
                                    <tr>
                                        <th>Название</th>
                                        <th>Время выполнение</th>
                                        <th>Статус выполнения</th>
                                        <th>Дата</th>
                                    </tr>
                                </thead>
                                <tbody>
                                {% for task in tasks %}
                                    <tr onclick="window.location.href='{% url 'main:task_detail' task.task_slug %}'" style="cursor:pointer;">
                                        <td>{{ task.name_of_task }}</td>
                                        <td>{{ task.time_of_cmlt }}</td>
                                        <td>{{ task.status_task }}</td>
                                        <td>{{ task.date_task }}</td>
                                        <td>
                                            <form action="{% url 'main:delete_task' task.id %}" method="post">
                                                {% csrf_token %}
                                                <button class="view" type="submit" onclick="return confirm('Вы уверены, что хотите удалить задачу?')">Удалить</button>
                                            </form>
                                        </td>
                                    </tr>
                                {% endfor %}
                                </tbody>
                            </table>
                        </div>

                    </div>
                </section>

                <section id="tab2-content">
                    <div class="report-container">
                        <div class="report-header">
                            <h1 class="recent-Articles">Операторы</h1>
                            <div class="button-grid">
                                <a href="{% url 'main:add_operator' %}"><button class="view">+ Добавить</button></a>
                            </div>
                        </div>

                        <div class="report-body">
                            <table>
                                <thead>
                                    <tr>
                                        <th>Логин</th>
                                        <th>Сотрудник</th>
                                        <th>Роль</th>
                                        <th>Описание</th>
                                    </tr>
                                </thead>
                                <tbody>
                                {% for operator in operators %}
                                    <tr onclick="window.location.href='{% url 'main:operator_detail' operator.operator_slug %}'" style="cursor:pointer;">
                                        <td>{{ operator.login }}</td>
                                        <td>{{ operator.employee }}</td>
                                        <td>{{ operator.post_operator }}</td>
                                        <td>{{ operator.operator_description }}</td>
                                        <td>
                                            <form action="{% url 'main:delete_operator' operator.id %}" method="post">
                                                {% csrf_token %}
                                                <button class="view" type="submit" onclick="return confirm('Вы уверены, что хотите удалить оператора?')">Удалить</button>
                                            </form>
                                        </td>
                                    </tr>
                                {% endfor %}
                                </tbody>
                            </table>
                        </div>

                    </div>
                </section>

                <section id="tab3-content">
                    <div class="report-container">
                        <div class="report-header">
                            <h1 class="recent-Articles">Документы</h1>
                            <div class="button-grid">
                                <a href="{% url 'main:add_doc' %}"><button class="view">+ Добавить</button></a>
                            </div>
                        </div>

                        <div class="report-body">
                            <table>
                                <thead>
                                    <tr>
                                        <th>Подразделение</th>
                                        <th>Оператор</th>
                                        <th>Наименование</th>
                                    </tr>
                                </thead>
                                <tbody>
                                {% for doc in docs %}
                                    <tr onclick="window.location.href='{% url 'main:doc_detail' doc.doc_slug %}'" style="cursor:pointer;">
                                        <td>{{ doc.division }}</td>
                                        <td>{{ doc.operator_doc }}</td>
                                        <td>{{ doc.doc_name }}</td>
                                        <td>
                                            <form action="{% url 'main:delete_doc' doc.id %}" method="post">
                                                {% csrf_token %}
                                                <button class="view" type="submit" onclick="return confirm('Вы уверены, что хотите удалить документ?')">Удалить</button>
                                            </form>
                                        </td>
                                    </tr>
                                {% endfor %}
                                </tbody>
                            </table>
                        </div>
                    </div>
                </section>
            </div>
        </div>
    <script src="{% static 'js/table_save.js' %}"></script>
    </div>
{% endblock %}